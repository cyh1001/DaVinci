# Forest Market Draft MCP - 项目概览

**专业的 Forest Market 产品草稿管理服务，为团队协作和业务集成而设计**

## 🎯 项目定位

这是一个 **MCP (Model Context Protocol) 服务器**，专门为 Forest Market 电商平台提供产品草稿管理能力。通过标准化的工具接口，让 AI 大模型能够高效地管理产品信息，从草稿创建到最终上架的完整流程。

## 🏗️ 架构概览

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   AI 大模型      │───▶│  Forest Market   │───▶│  Forest Market  │
│  (Claude/GPT)   │    │  Draft MCP       │    │  平台上架       │
└─────────────────┘    └──────────────────┘    └─────────────────┘
                              │
                              ▼
                       ┌──────────────────┐
                       │  本地JSON存储     │
                       │  + 用户权限      │
                       └──────────────────┘
```

## 📊 核心数据

### 工具统计
- **8个核心工具** (从原来13个精简优化)
- **3种功能分类**: 基础管理、草稿更新、搜索发现
- **100%业务覆盖**: 支持 Forest Market 完整字段集

### 技术栈
- **FastMCP 2.0**: 现代化 MCP 框架
- **Python 3.10+**: 类型安全的开发语言  
- **Pydantic**: 严格的数据验证
- **静态Token认证**: 企业级安全保护

## 🛠️ 8个核心工具速览

### 基础管理 (4个)
1. **create_draft** - 创建产品草稿
2. **get_draft** - 获取草稿信息 (支持批量、摘要模式)
3. **delete_draft** - 删除草稿
4. **export_draft** - 导出上架格式

### 草稿更新 (3个)  
5. **update_draft** - 完全替换字段值
6. **add_to_draft** - 增量添加内容
7. **remove_from_draft** - 选择性删除内容

### 搜索发现 (1个)
8. **list_drafts** - 统一的列表/搜索/统计工具

## 💼 业务价值

### 对于开发团队
- **标准化接口**: 统一的 MCP 协议，易于集成
- **类型安全**: 完整的参数验证，减少运行时错误
- **权限隔离**: 用户数据安全，支持多租户

### 对于业务团队  
- **工作流优化**: 从草稿到上架的完整闭环
- **智能搜索**: 快速找到相关产品，避免重复工作
- **批量处理**: 高效管理大量产品草稿

### 对于 AI 集成
- **直观的工具命名**: AI 容易理解和选择正确工具
- **清晰的使用指南**: 减少工具选择错误
- **灵活的参数**: 支持各种复杂的业务场景

## 🔧 快速开始

### 1. 启动服务
```bash
# 安装依赖
uv sync

# 启动服务 (默认认证)
uv run python server.py

# 或使用自定义认证
MCP_AUTH_TOKEN=your-token uv run python server.py
```

### 2. 连接配置
```json
{
  "mcpServers": {
    "forest-market-draft": {
      "url": "http://127.0.0.1:8000/mcp/",
      "headers": {
        "Authorization": "Bearer your-secret-token-2024"
      }
    }
  }
}
```

### 3. 基本使用
```python
# 创建草稿
create_draft(
    user_id="alice",
    title="iPhone 15 Pro",
    price=1299.0,
    category="Electronics"
)

# 搜索草稿  
list_drafts(
    user_id="alice",
    query="iPhone",
    category="Electronics"
)
```

## 🎨 Forest Market 字段支持

### 完整字段覆盖
- **基础信息**: 标题、描述、价格、分类、状态
- **变体选项**: 尺寸、颜色等多维度变体
- **媒体内容**: 多图片支持
- **运输配置**: 起发地、目的地、运费设置
- **支付方式**: 7种主流加密货币
- **营销工具**: 折扣类型和折扣值

### 智能业务逻辑
- **Digital Goods**: 自动清除运输相关字段
- **参数验证**: 价格、数量、折扣等业务规则检查
- **数据完整性**: 自动处理空值和默认值

## 📈 性能特点

- **轻量启动**: 秒级服务启动
- **内存高效**: 优化的数据结构设计
- **并发安全**: 支持多用户同时访问
- **搜索优化**: 智能相关性排序算法

## 🚀 部署选项

### 开发环境
- 本地运行，JSON 文件存储
- 默认认证，快速上手

### 生产环境  
- 云服务器部署 (Vercel、Railway等)
- 环境变量认证配置
- 数据备份和恢复

## 🤝 团队集成

### AI 开发者
- 参考 `server.py` 中的 instructions
- 工具选择指南帮助正确使用
- 完整的错误处理和反馈

### 后端开发者
- 标准的 HTTP MCP 接口
- 完整的类型定义和验证
- 易于扩展的模块化设计

### 产品经理
- 完整的 Forest Market 业务覆盖
- 灵活的权限和数据管理
- 详细的使用文档和示例

---

**准备好开始了吗？** 查看 [README.md](README.md) 获取详细的技术文档，或直接运行 `uv run python server.py` 开始体验！