# Forest Market Authentication Test Suite

This folder contains a single, integrated script to reliably test the Forest Market MetaMask authentication workflow from start to finish.

## The Workflow

The new `test_full_login_flow.py` script combines all previous steps into one seamless process.

### How to Run the Test

1.  **Start the local web server**:
    *   Navigate to this directory (`test-fm-login`) in your terminal.
    *   Run the command: `python -m http.server 8000`
    *   Keep this terminal window open. This is **Terminal 1**.

2.  **Run the integrated test script**:
    *   Open a **new, separate terminal window**. This is **Terminal 2**.
    *   Navigate to this directory (`test-fm-login`).
    *   Run the command: `python test_full_login_flow.py`

3.  **Follow the script's instructions in Terminal 2**:
    *   The script will first fetch a fresh `nonce` and `CSRF token`.
    *   It will then prompt you for your wallet address.
    *   Next, it will print a yellow message block and ask you to sign it using `signer.html`.

4.  **Get the Signature**:
    *   Open **`http://localhost:8000/signer.html`** in the browser where you have MetaMask installed.
    *   Copy the yellow message from **Terminal 2** and paste it into the text area on the webpage.
    *   Click "Connect Wallet & Sign Message" and approve the request in MetaMask.
    *   Copy the generated signature from the webpage.

5.  **Complete the Test**:
    *   Paste the signature back into **Terminal 2** when prompted.
    *   The script will automatically continue and run the complete authentication test.

If successful, you will see a `ALL TESTS PASSED!` message, and the final session token will be saved to `session_token.txt`.

## File Descriptions

*   `test_full_login_flow.py`: **The only script you need to run.** It handles the entire testing process.
*   `signer.html`: A secure, local tool for signing the exact message generated by the script.
*   `session_token.txt`: (Generated file) If the test is successful, your valid session token will be saved here.
